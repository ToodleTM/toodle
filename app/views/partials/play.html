<div ng-include="'partials/navbar'"></div>

<div id="notFound" class="alert alert-danger ng-binding" role="alert" hidden="" style="display: none;">
    <button type="button" class="close alert-fix-close" ng-click="hideAlerts()" style="display: none;"><span
            aria-hidden="true" style="display: none;">×</span><span class="sr-only" style="display: none;">Close</span>
    </button>
    <span translate="play.notFound"></span>
</div>
<div id="content">
    <h1><span translate="play.header.tournament"></span> {{tournamentInfo.tournamentName}} {{ 'play.header.playPage' |
        translate}}</h1>

    <div class="well">
        <p ng-show="isCollapsed" style="text-align:center">
            <a href="#"
               ng-click="toggleCollapse()" translate="admin.intro">
            </a>
        </p>

        <div collapse="isCollapsed">
            <button type="button" class="close" ng-click="toggleCollapse()">
                <span aria-hidden="true">×</span>
                <span class="sr-only">Close</span>
            </button>
            <tabset>
                <tab>
                    <tab-heading>
                        <span translate="admin.form.generalSettingsTab"></span>
                    </tab-heading>
                    <fieldset>
                        <div class="row">
                            <div class="form-group col-sm-6">
                                <label class="control-label" for="engine" translate="admin.form.engine"></label>

                                <span id="engine" class="form-control">{{engine.description}}</span>
                            </div>
                        </div>
                        <div class="row">
                            <div class="form-group col-sm-12">
                                <label class="control-label" for="description"
                                       translate="admin.form.description"></label>
                                <span id="description" name="description" class="form-control"> {{tournamentInfo.description}}</span>
                            </div>
                        </div>
                        <div class="row">
                            <div class="form-group col-sm-12">
                                <label class="control-label" for="startDate" translate="admin.form.startDate"></label>
                                <span type="text" id="startDate" name="startDate" class="form-control"> {{tournamentInfo.startDate}}</span>
                            </div>
                        </div>
                    </fieldset>
                </tab>
                <tab>
                    <tab-heading>
                        <span translate="admin.form.playerManagementTab"></span>
                    </tab-heading>
                    <fieldset ng-show="!tournamentInfo.locked">
                        <legend translate="play.enter.register"></legend>
                        <div class="row">
                            <form ng-submit="enterTournament()">
                                <div class="form-group col-sm-6">
                                    <input type="text" name="inputNick" id="inputNick" class="form-control"
                                           placeholder="{{ 'play.enter.nickPlaceholder' | translate}}" ng-model="nick"/>
                                </div>
                                <div class="form-group col-sm-4">
                                    <select name="inputFaction" class="form-control" ng-model="faction"
                                            ng-options="item for item in factions track by item">
                                        <option value=""> -- Choose a faction --</option>
                                    </select>
                                </div>
                                <div class="form-group col-sm-1">
                                    <button class="btn btn-primary" id="registerPlayerGo" type="submit"
                                            translate="play.enter.go"></button>
                                </div>
                            </form>
                        </div>
                        <div id="registrationOk" class="alert alert-success alert-dismissible app-alert" role="alert"
                             hidden>
                            <button type="button" class="close alert-fix-close" ng-click="hideAlerts()"><span
                                    aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                            <span translate="play.register.success"></span>
                        </div>
                        <div id="registrationKo" class="alert alert-danger alert-dismissible app-alert" role="alert"
                             hidden>
                            <button type="button" class="close alert-fix-close" ng-click="hideAlerts()"><span
                                    aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                            <span translate="play.register.fail"></span> (<span translate="{{errorMessage}}">{{errorMessage | translate}}</span>)
                        </div>
                    </fieldset>

                    <fieldset id="playersList" ng-model="playerList" class="playersStaticList">
                        <legend><span translate="play.register.registeredPlayers"></span> ({{playerList.length}})
                        </legend>
                        <div ng-repeat="player in playerList" id="playerList" class="playerInList">
                <span>
                <span ng-if="player.faction"><img src="/images/icon-{{player.faction}}.png" height="20px"></span>{{player.name}}
                </span>
                        </div>
                        <div ng-show="playerList.length == 0">
                            <span translate="play.register.noPlayers"></span>
                        </div>
                    </fieldset>
                </tab>
            </tabset>
        </div>
    </div>
    <div ng-controller="BracketCtrl">
        <div ng-include="'partials/bracket.html'"></div>
    </div>
</div>

<div ng-include="'partials/footer'"></div>